
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¹³å°ç¦åˆ© - å†…éƒ¨å…¥å£</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 15px;
            position: relative;
            overflow-x: hidden;
        }
        
        /* èƒŒæ™¯è£…é¥° */
        body::before {
            content: '';
            position: fixed;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 1px, transparent 1px);
            background-size: 30px 30px;
            animation: float 20s linear infinite;
            pointer-events: none;
        }
        
        @keyframes float {
            0% { transform: translate(0, 0) rotate(0deg); }
            100% { transform: translate(-30px, -30px) rotate(360deg); }
        }
        
        .container {
            max-width: 500px;
            margin: 0 auto;
            position: relative;
            z-index: 1;
        }
        
        .header {
            text-align: center;
            color: white;
            margin-bottom: 25px;
            animation: slideDown 0.8s ease-out;
        }
        
        @keyframes slideDown {
            from { transform: translateY(-30px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        .header h1 {
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 8px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }
        
        .header p {
            font-size: 16px;
            opacity: 0.9;
            margin-bottom: 15px;
        }
        
        .stats-bar {
            background: rgba(255,255,255,0.2);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 12px 20px;
            display: flex;
            justify-content: space-around;
            margin-bottom: 20px;
            border: 1px solid rgba(255,255,255,0.3);
        }
        
        /* æœºç¥¨é…’åº—æ‰“è½¦å…¥å£æ ·å¼ */
        .travel-entry {
            background: linear-gradient(135deg, rgba(255,255,255,0.25), rgba(255,255,255,0.1));
            backdrop-filter: blur(15px);
            border: 2px solid rgba(255,255,255,0.4);
            border-radius: 20px;
            padding: 16px 20px;
            margin: 20px 0;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
            animation: travelEntryFloat 3s ease-in-out infinite;
        }
        
        @keyframes travelEntryFloat {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-3px); }
        }
        
        .travel-entry:hover {
            transform: translateY(-5px) scale(1.02);
            background: linear-gradient(135deg, rgba(255,255,255,0.35), rgba(255,255,255,0.2));
            border-color: rgba(255,255,255,0.6);
            box-shadow: 0 12px 40px rgba(0,0,0,0.2);
        }
        
        .travel-entry:active {
            transform: translateY(-2px) scale(0.98);
        }
        
        .travel-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
            position: relative;
            z-index: 2;
        }
        
        .travel-icon {
            font-size: 28px;
            margin-right: 15px;
            animation: travelIconRotate 4s linear infinite;
        }
        
        @keyframes travelIconRotate {
            0% { transform: rotate(0deg); }
            25% { transform: rotate(-5deg); }
            75% { transform: rotate(5deg); }
            100% { transform: rotate(0deg); }
        }
        
        .travel-info {
            flex: 1;
            text-align: left;
        }
        
        .travel-title {
            font-size: 18px;
            font-weight: 700;
            color: white;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
            margin-bottom: 2px;
        }
        
        .travel-subtitle {
            font-size: 13px;
            color: rgba(255,255,255,0.85);
            text-shadow: 0 1px 2px rgba(0,0,0,0.2);
        }
        
        .travel-arrow {
            font-size: 20px;
            color: white;
            font-weight: bold;
            transition: transform 0.3s ease;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }
        
        .travel-entry:hover .travel-arrow {
            transform: translateX(5px);
        }
        
        .travel-shine {
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255,255,255,0.1), transparent);
            animation: travelShine 3s infinite;
            pointer-events: none;
        }
        
        @keyframes travelShine {
            0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
            50% { transform: translateX(-50%) translateY(-50%) rotate(45deg); }
            100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
        }
        
        .stat-item {
            text-align: center;
            color: white;
        }
        
        .stat-number {
            font-size: 18px;
            font-weight: 700;
            display: block;
        }
        
        .stat-label {
            font-size: 12px;
            opacity: 0.8;
        }
        
        .platform-section {
            background: white;
            border-radius: 20px;
            padding: 24px;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
            transform: translateY(20px);
            opacity: 0;
            animation: slideUp 0.6s ease-out forwards;
            position: relative;
            overflow: hidden;
        }
        
        .platform-section:nth-child(2) { animation-delay: 0.1s; }
        .platform-section:nth-child(3) { animation-delay: 0.2s; }
        .platform-section:nth-child(4) { animation-delay: 0.3s; }
        
        @keyframes slideUp {
            to { transform: translateY(0); opacity: 1; }
        }
        
        .platform-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.6), transparent);
            animation: shimmer 2s infinite;
        }
        
        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }
        
        .platform-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
        }
        
        .platform-info {
            display: flex;
            align-items: center;
        }
        
        .platform-icon {
            width: 44px;
            height: 44px;
            border-radius: 12px;
            margin-right: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
            font-size: 16px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            position: relative;
        }
        
        .platform-icon::after {
            content: '';
            position: absolute;
            inset: -2px;
            background: linear-gradient(45deg, transparent, rgba(255,255,255,0.3), transparent);
            border-radius: inherit;
            z-index: -1;
        }
        
        .meituan .platform-icon {
            background: linear-gradient(135deg, #FFD100 0%, #FFA000 100%);
            color: #333;
        }
        
        .jd .platform-icon {
            background: linear-gradient(135deg, #E1251B 0%, #C62828 100%);
        }
        
        .taobao .platform-icon {
            background: linear-gradient(135deg, #FF6A00 0%, #E65100 100%);
        }
        
        .platform-title {
            font-size: 20px;
            font-weight: 600;
            color: #333;
        }
        
        .platform-subtitle {
            font-size: 14px;
            color: #666;
            margin-top: 2px;
        }
        
        .platform-badge {
            background: linear-gradient(135deg, #ff6b6b, #ee5a52);
            color: white;
            padding: 6px 12px;
            border-radius: 15px;
            font-size: 12px;
            font-weight: 600;
            box-shadow: 0 2px 8px rgba(255,107,107,0.3);
        }
        
        .platform-badge.top {
            background: linear-gradient(135deg, #FFD700, #FFA500);
            color: #333;
            animation: glow 2s infinite;
        }
        
        @keyframes glow {
            0%, 100% { box-shadow: 0 2px 8px rgba(255,215,0,0.3); }
            50% { box-shadow: 0 4px 16px rgba(255,215,0,0.6); }
        }
        
        .coupon-grid {
            display: grid;
            gap: 15px;
        }
        
        .meituan .coupon-grid {
            grid-template-columns: 1fr;
        }
        
        .jd .coupon-grid {
            grid-template-columns: repeat(2, 1fr);
        }
        
        .taobao .coupon-grid {
            grid-template-columns: 1fr;
            gap: 12px;
        }
        
        .coupon-item {
            background: linear-gradient(135deg, #f8f9ff 0%, #f0f2ff 100%);
            border: 2px solid #e8ebff;
            border-radius: 16px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
            user-select: none;
        }
        
        .coupon-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            transition: left 0.5s;
        }
        
        .coupon-item:hover::before {
            left: 100%;
        }
        
        .coupon-item:hover {
            transform: translateY(-3px) scale(1.02);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }
        
        .coupon-item:active {
            transform: translateY(-1px) scale(0.98);
        }
        
        .meituan .coupon-item {
            background: linear-gradient(135deg, #fff8e1 0%, #fff3c4 100%);
            border-color: #ffd54f;
        }
        
        .jd .coupon-item {
            background: linear-gradient(135deg, #ffebee 0%, #ffcdd2 100%);
            border-color: #ef5350;
        }
        
        .taobao .coupon-item {
            background: linear-gradient(135deg, #fff3e0 0%, #ffcc80 100%);
            border-color: #ff9800;
        }
        
        .coupon-header {
            display: flex;
            align-items: flex-start;
            justify-content: space-between;
            margin-bottom: 8px;
        }
        
        .coupon-title {
            font-size: 16px;
            font-weight: 600;
            color: #333;
            flex: 1;
        }
        
        .coupon-amount {
            background: #ff4757;
            color: white;
            padding: 4px 8px;
            border-radius: 8px;
            font-size: 12px;
            font-weight: 600;
            margin-left: 8px;
        }
        
        .coupon-desc {
            font-size: 14px;
            color: #666;
            line-height: 1.5;
            margin-bottom: 12px;
        }
        
        .coupon-footer {
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .tag {
            display: inline-block;
            color: white;
            font-size: 11px;
            padding: 4px 10px;
            border-radius: 12px;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .tag.hot {
            background: linear-gradient(135deg, #ff6b6b, #ee5a52);
        }
        
        .tag.new {
            background: linear-gradient(135deg, #4ecdc4, #44a08d);
        }
        
        .tag.stack {
            background: linear-gradient(135deg, #45b7d1, #2196F3);
        }
        
        .tag.recommend {
            background: linear-gradient(135deg, #ffa726, #ff9800);
        }
        
        .tag.top {
            background: linear-gradient(135deg, #FFD700, #FFA500);
            color: #333;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        .coupon-status {
            font-size: 12px;
            color: #999;
            display: flex;
            align-items: center;
        }
        
        .status-dot {
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background: #4caf50;
            margin-right: 6px;
            animation: pulse 2s infinite;
        }
        
        .warning {
            background: linear-gradient(135deg, #fff8e1, #ffecb3);
            border: 2px solid #ffb74d;
            border-radius: 12px;
            padding: 16px;
            margin-top: 16px;
            font-size: 14px;
            color: #e65100;
            position: relative;
            overflow: hidden;
        }
        
        .warning::before {
            content: 'âš ï¸';
            font-size: 18px;
            margin-right: 8px;
        }
        
        /* å…¬å‘Šå¼¹çª—æ ·å¼ */
        .announcement-modal {
            display: block;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 2000;
            padding: 20px;
            backdrop-filter: blur(10px);
            animation: fadeIn 0.5s ease-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .announcement-content {
            background: linear-gradient(135deg, #fff, #f8f9ff);
            border-radius: 20px;
            padding: 30px;
            max-width: 400px;
            margin: 10% auto;
            position: relative;
            text-align: center;
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
            animation: announceSlideIn 0.6s ease-out;
            border: 3px solid #FFD700;
        }
        
        @keyframes announceSlideIn {
            from { transform: translateY(-50px) scale(0.9); opacity: 0; }
            to { transform: translateY(0) scale(1); opacity: 1; }
        }
        
        .announcement-title {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 15px;
            color: #333;
            background: linear-gradient(135deg, #FF6B6B, #4ECDC4);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .announcement-text {
            font-size: 16px;
            color: #666;
            line-height: 1.6;
            margin-bottom: 20px;
        }
        
        .announcement-highlight {
            background: linear-gradient(135deg, #FFD700, #FFA500);
            color: #333;
            padding: 10px 15px;
            border-radius: 10px;
            font-weight: 600;
            margin: 15px 0;
            box-shadow: 0 4px 12px rgba(255,215,0,0.3);
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.6);
            z-index: 1000;
            padding: 20px;
            backdrop-filter: blur(5px);
        }
        
        .modal-content {
            background: white;
            border-radius: 20px;
            padding: 30px;
            max-width: 400px;
            margin: 20px auto;
            position: relative;
            top: 50%;
            transform: translateY(-50%);
            text-align: center;
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
            animation: modalSlideIn 0.3s ease-out;
            max-height: 90vh;
            overflow-y: auto;
        }
        
        /* é’ˆå¯¹å†…å®¹è¾ƒå¤šçš„å¼¹çª—ä¼˜åŒ– */
        .modal-content.large-content {
            top: 20px;
            transform: none;
            margin-top: 20px;
            margin-bottom: 20px;
        }
        
        @keyframes modalSlideIn {
            from { transform: translateY(-50%) scale(0.9); opacity: 0; }
            to { transform: translateY(-50%) scale(1); opacity: 1; }
        }
        
        .modal-title {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 20px;
            color: #333;
        }
        
        .coupon-code {
            background: #f8f9fa;
            border: 2px dashed #dee2e6;
            border-radius: 12px;
            padding: 16px;
            font-family: 'SF Mono', Monaco, 'Cascadia Code', 'Roboto Mono', Consolas, 'Courier New', monospace;
            font-size: 14px;
            margin: 20px 0;
            word-break: break-all;
            line-height: 1.5;
            position: relative;
        }
        
        .copy-success {
            position: absolute;
            top: -8px;
            right: -8px;
            background: #4caf50;
            color: white;
            padding: 4px 8px;
            border-radius: 8px;
            font-size: 10px;
            animation: copyPop 0.6s ease-out;
        }
        
        @keyframes copyPop {
            0% { transform: scale(0); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }
        
        .btn {
            background: linear-gradient(135deg, #007AFF, #0056cc);
            color: white;
            border: none;
            border-radius: 12px;
            padding: 14px 28px;
            font-size: 16px;
            cursor: pointer;
            margin: 8px;
            transition: all 0.3s ease;
            font-weight: 600;
            box-shadow: 0 4px 15px rgba(0,122,255,0.3);
        }
        
        .btn:hover {
            background: linear-gradient(135deg, #0056cc, #003d99);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,122,255,0.4);
        }
        
        .btn:active {
            transform: translateY(0);
        }
        
        .btn-secondary {
            background: linear-gradient(135deg, #6c757d, #5a6268);
            box-shadow: 0 4px 15px rgba(108,117,125,0.3);
        }
        
        .btn-secondary:hover {
            background: linear-gradient(135deg, #5a6268, #495057);
            box-shadow: 0 6px 20px rgba(108,117,125,0.4);
        }
        
        .btn-gold {
            background: linear-gradient(135deg, #FFD700, #FFA500);
            color: #333;
            box-shadow: 0 4px 15px rgba(255,215,0,0.3);
        }
        
        .btn-gold:hover {
            background: linear-gradient(135deg, #FFA500, #FF8C00);
            box-shadow: 0 6px 20px rgba(255,215,0,0.4);
        }
        
        .qr-guide {
            margin-top: 20px;
            padding: 20px;
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border-radius: 12px;
            border: 2px dashed #ced4da;
        }
        
        .guide-steps {
            display: flex;
            justify-content: space-around;
            margin: 16px 0;
        }
        
        .guide-step {
            text-align: center;
            flex: 1;
        }
        
        .guide-step-icon {
            font-size: 24px;
            margin-bottom: 8px;
        }
        
        .guide-step-text {
            font-size: 12px;
            color: #666;
        }
        
        .floating-help {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 56px;
            height: 56px;
            background: linear-gradient(135deg, #ff6b6b, #ee5a52);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 24px;
            cursor: pointer;
            box-shadow: 0 8px 20px rgba(255,107,107,0.4);
            z-index: 999;
            transition: all 0.3s ease;
        }
        
        .floating-help:hover {
            transform: scale(1.1);
            box-shadow: 0 12px 25px rgba(255,107,107,0.5);
        }
        
        .success-toast {
            position: fixed;
            top: 30px;
            left: 50%;
            transform: translateX(-50%);
            background: #4caf50;
            color: white;
            padding: 12px 24px;
            border-radius: 25px;
            font-size: 14px;
            z-index: 1001;
            display: none;
            animation: toastSlide 0.3s ease-out;
        }
        
        @keyframes toastSlide {
            from { transform: translateX(-50%) translateY(-20px); opacity: 0; }
            to { transform: translateX(-50%) translateY(0); opacity: 1; }
        }
        
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 2px solid #ffffff;
            border-radius: 50%;
            border-top-color: transparent;
            animation: spin 1s linear infinite;
            margin-right: 8px;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* æµè§ˆå™¨æç¤ºæ ·å¼ */
        .browser-warning {
            background: linear-gradient(135deg, #ffebee, #ffcdd2);
            border: 2px solid #f44336;
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 16px;
            font-size: 14px;
            color: #c62828;
            position: relative;
            overflow: hidden;
        }
        
        .browser-warning::before {
            content: 'ğŸš¨';
            font-size: 18px;
            margin-right: 8px;
        }
        
        /* å£ä»¤å¤åˆ¶æŒ‡å¼•æ ·å¼ */
        .copy-guide {
            background: linear-gradient(135deg, #e3f2fd, #bbdefb);
            border: 2px solid #2196f3;
            border-radius: 12px;
            padding: 16px;
            margin-top: 16px;
            font-size: 14px;
            color: #1565c0;
            text-align: center;
        }
        
        .copy-guide::before {
            content: 'ğŸ“‹';
            font-size: 18px;
            margin-right: 8px;
        }
        
        /* å“åº”å¼ä¼˜åŒ– */
        @media (max-width: 480px) {
            .container {
                padding: 0 10px;
            }
            
            .platform-section {
                padding: 20px;
                margin-bottom: 15px;
            }
            
            .jd .coupon-grid {
                grid-template-columns: 1fr;
            }
            
            .floating-help {
                bottom: 20px;
                right: 20px;
                width: 50px;
                height: 50px;
                font-size: 20px;
            }
            
            .announcement-content {
                margin: 5% auto;
                padding: 20px;
            }
            
            /* ç§»åŠ¨ç«¯å¼¹çª—ä¼˜åŒ– */
            .modal {
                padding: 10px;
            }
            
            .modal-content {
                margin: 10px auto;
                padding: 20px;
                max-width: calc(100vw - 20px);
                max-height: calc(100vh - 40px);
            }
            
            .modal-content.large-content {
                top: 10px;
                margin-top: 10px;
                margin-bottom: 10px;
                max-height: calc(100vh - 20px);
            }
            
            /* äºŒç»´ç å›¾ç‰‡åœ¨ç§»åŠ¨ç«¯çš„ä¼˜åŒ– */
            #qrCodeImage, #qrPlaceholder, #elemeQrCodeImage, #elemePlaceholder {
                max-width: 160px !important;
                max-height: 160px !important;
                width: 160px !important;
                height: 160px !important;
            }
            
            /* æœºç¥¨å…¥å£ç§»åŠ¨ç«¯ä¼˜åŒ– */
            .travel-entry {
                padding: 14px 16px;
                margin: 15px 0;
            }
            
            .travel-title {
                font-size: 16px;
            }
            
            .travel-subtitle {
                font-size: 12px;
            }
            
            .travel-icon {
                font-size: 24px;
                margin-right: 12px;
            }
            
            .travel-arrow {
                font-size: 18px;
            }
        }
    </style>
</head>
<body>
    <!-- å…¬å‘Šå¼¹çª— -->
    <div id="announcementModal" class="announcement-modal">
        <div class="announcement-content">
            <div class="announcement-title">ğŸ”¥ã€é‡è¦æ›´æ–° & é™æ—¶ç¦åˆ©ã€‘</div>
            <div class="announcement-text">
                <strong>8æœˆ2æ—¥ ç¾å›¢å¤–å–å¤§é¢çº¢åŒ…</strong> ç«çƒ­å¼€æŠ¢ï¼åˆ«é”™è¿‡ï¼<br><br>
                <strong>âœ¨ é‡ç£…æ–°å¢ä¸‰å¤§ä¼˜æƒ ï¼š</strong><br>
                âœˆï¸ <strong>æœºç¥¨ç«‹å‡100å…ƒï¼</strong> (æ— é—¨æ§›)<br>
                ğŸ¡ <strong>æ°‘å®¿ç«‹å‡100å…ƒï¼</strong> (æ— é—¨æ§›)<br>
                ğŸš• <strong>æ‰“è½¦å…å•æœºä¼šï¼</strong> å…¥å£å·²å¼€æ”¾ï¼
            </div>
            <div class="announcement-highlight">
                âš ï¸ é‡è¦æé†’ï¼šæ·˜å®éœ€è¦åœ¨é»˜è®¤æµè§ˆå™¨ä¸­æ‰“å¼€ï¼Œå¦åˆ™æ— æ³•è·³è½¬ï¼
            </div>
            <div style="margin-top: 20px;">
                <button class="btn btn-secondary" onclick="closeAnnouncement()">æˆ‘çŸ¥é“äº†</button>
            </div>
        </div>
    </div>

    <div class="container">
        <div class="header">
            <h1>ğŸœ ç¬¬ä¸‰æ¬¡å¤–å–å¤§æˆ˜ï¼Œå²é«˜ï¼ï¼ï¼</h1>
            <p>é›†åˆä¸‰å¤§å¹³å°æ‰€æœ‰å‘˜å·¥ä¼˜æƒ å…¥å£</p>
            
            <!-- æœºç¥¨é…’åº—æ‰“è½¦ä¼˜æƒ å…¥å£ -->
            <div class="travel-entry" onclick="openTravelPage()">
                <div class="travel-content">
                    <div class="travel-icon">âœˆï¸</div>
                    <div class="travel-info">
                        <div class="travel-title">æœºç¥¨ Â· é…’åº— Â· æ‰“è½¦</div>
                        <div class="travel-subtitle">ä¸“å±ä¼˜æƒ é€šé“</div>
                    </div>
                    <div class="travel-arrow">â†’</div>
                </div>
                <div class="travel-shine"></div>
            </div>
            
            <div class="stats-bar">
                <div class="stat-item">
                    <span class="stat-number" id="totalCoupons">15+</span>
                    <span class="stat-label">ä¼˜æƒ åˆ¸</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number" id="totalSaved">999+</span>
                    <span class="stat-label">å·²çœé‡‘é¢</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number" id="activeUsers">10k+</span>
                    <span class="stat-label">æ´»è·ƒç”¨æˆ·</span>
                </div>
            </div>
        </div>
        
        <!-- æ·˜ç³»å¤–å– - ç°åœ¨åœ¨ç¬¬ä¸€ä½ -->
        <div class="platform-section taobao">
            <div class="platform-header">
                <div class="platform-info">
                    <div class="platform-icon">æ·˜å®</div>
                    <div>
                        <div class="platform-title">æ·˜ç³»å¤–å–</div>
                        <div class="platform-subtitle">é˜¿é‡Œç”Ÿæ€</div>
                    </div>
                </div>
                <div class="platform-badge top">ç½®é¡¶æ¨è</div>
            </div>
            
            <!-- æµè§ˆå™¨æç¤º -->
            <div class="browser-warning" id="browserWarning" style="display: none;">
                æ£€æµ‹åˆ°æ‚¨åœ¨å¾®ä¿¡ç¯å¢ƒï¼ä¸ºä¿è¯æ­£å¸¸è·³è½¬ï¼Œè¯·ç‚¹å‡»å³ä¸Šè§’...é€‰æ‹©ç”¨é»˜è®¤æµè§ˆå™¨ä¸­æ‰“å¼€æœ¬é¡µé¢ã€‚
            </div>
            
            <div class="coupon-grid">
                <!-- æ³¨æ„ï¼šä»¥ä¸‹ä¸‰ä¸ªé“¾æ¥éœ€è¦ç”¨æˆ·æä¾›å…·ä½“åœ°å€ -->
                <div class="coupon-item" onclick="openTaobaoEntry1()">
                    <div class="coupon-header">
                        <div class="coupon-title">ğŸ§‹ æ·˜å®é—ªè´­0.01å–å¥¶èŒ¶</div>
                        <div class="coupon-amount">æœ€é«˜15å…ƒ</div>
                    </div>
                    <div class="coupon-desc">é¢†æœ€é«˜15å…ƒå¤§é¢çº¢åŒ…ï¼Œ0.01å…ƒå–å¥¶èŒ¶</div>
                    <div class="coupon-footer">
                        <span class="tag top">ç½®é¡¶</span>
                        <div class="coupon-status">
                            <div class="status-dot"></div>
                            å¯ç”¨
                        </div>
                    </div>
                </div>
                <div class="coupon-item" onclick="openTaobaoEntry2()">
                    <div class="coupon-header">
                        <div class="coupon-title">ğŸ†“ æ–°å®¢å…å•</div>
                        <div class="coupon-amount">é¦–å•å…å•</div>
                    </div>
                    <div class="coupon-desc">é—ªè´­æ–°ç”¨æˆ·å¯é¢†é¦–å•å…å•ç¦åˆ©</div>
                    <div class="coupon-footer">
                        <span class="tag new">æ–°å®¢</span>
                        <div class="coupon-status">
                            <div class="status-dot"></div>
                            å¯ç”¨
                        </div>
                    </div>
                </div>
                <div class="coupon-item" onclick="openTaobaoEntry3()">
                    <div class="coupon-header">
                        <div class="coupon-title">ğŸ æ·˜å®å åŠ çº¢åŒ…</div>
                        <div class="coupon-amount">å¯å åŠ </div>
                    </div>
                    <div class="coupon-desc">é—ªè´­æ–°ç”¨æˆ·å¯é¢†é¦–å•å…å•ç¦åˆ©</div>
                    <div class="coupon-footer">
                        <span class="tag stack">å¯å åŠ </span>
                        <div class="coupon-status">
                            <div class="status-dot"></div>
                            å¯ç”¨
                        </div>
                    </div>
                </div>
                
                <!-- é¥¿äº†ä¹ˆ18.8æé™æš´æ¶¨ä¿æŒä¸å˜ -->
                <div class="warning">
                    ğŸ’¡ çœé’±æ”»ç•¥ï¼šä¸‰ä¸ªå…¥å£éƒ½èƒ½é¢†å–ï¼Œå»ºè®®å…¨éƒ¨é¢†å–åå åŠ ä½¿ç”¨ï¼Œäº«å—æœ€å¤§ä¼˜æƒ ï¼
                </div>
                
                <div class="coupon-item" onclick="openElemeExtreme()" style="margin-top: 16px;">
                    <div class="coupon-header">
                        <div class="coupon-title">ğŸ’¥ é¥¿äº†ä¹ˆ18.8æé™æš´æ¶¨</div>
                        <div class="coupon-amount">18.8å…ƒ</div>
                    </div>
                    <div class="coupon-desc">æé™ä¼˜æƒ ï¼Œé™æ—¶æŠ¢è´­ï¼Œç‹¬ç«‹æ´»åŠ¨ï¼Œå¿…ä¸­å…¥å£</div>
                    <div class="coupon-footer">
                        <span class="tag hot">çˆ†æ¬¾</span>
                        <div class="coupon-status">
                            <div class="status-dot"></div>
                            é™æ—¶
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="copy-guide" id="copyGuide" style="display: none;">
                æ£€æµ‹åˆ°æ— æ³•è·³è½¬ï¼å£ä»¤å·²è‡ªåŠ¨å¤åˆ¶åˆ°å‰ªåˆ‡æ¿ï¼Œè¯·æ‰‹åŠ¨æ‰“å¼€æ·˜å®Appç²˜è´´ä½¿ç”¨ã€‚
            </div>
        </div>
        
        <!-- ç¾å›¢å¤–å– - ç°åœ¨ç§»åˆ°ç¬¬äºŒä½ -->
        <div class="platform-section meituan">
            <div class="platform-header">
                <div class="platform-info">
                    <div class="platform-icon">ç¾å›¢</div>
                    <div>
                        <div class="platform-title">ç¾å›¢å¤–å–</div>
                        <div class="platform-subtitle">å¤§é¢é€šç”¨</div>
                    </div>
                </div>
                <div class="platform-badge">HOT</div>
            </div>
            <div class="coupon-grid">
                <div class="coupon-item" onclick="openMeituanFestival()">
                    <div class="coupon-header">
                        <div class="coupon-title">ğŸ‰ ç¾å›¢å¤–å–èŠ‚</div>
                        <div class="coupon-amount">æœ€é«˜66å…ƒ</div>
                    </div>
                    <div class="coupon-desc">15-15/25-20ä¸å®šæ—¶æ‰è½</div>
                    <div class="coupon-footer">
                        <span class="tag hot">çƒ­é—¨</span>
                        <div class="coupon-status">
                            <div class="status-dot"></div>
                            è¿›è¡Œä¸­
                        </div>
                    </div>
                </div>
                <div class="coupon-item" onclick="openMeituanAutumnTea()">
                    <div class="coupon-header">
                        <div class="coupon-title">ğŸ‚ ç§‹å¤©ç¬¬ä¸€æ¯å¥¶èŒ¶</div>
                        <div class="coupon-amount">é™è´­2ä»½</div>
                    </div>
                    <div class="coupon-desc">æ¯äººæ¯æ—¥é™è´­2ä»½ï¼Œç§‹æ—¥æš–å¿ƒç‰¹æƒ </div>
                    <div class="coupon-footer">
                        <span class="tag hot">é™è´­</span>
                        <div class="coupon-status">
                            <div class="status-dot"></div>
                            æ¯æ—¥é™é‡
                        </div>
                    </div>
                </div>
                <div class="coupon-item" onclick="openMeituanDiscount()">
                    <div class="coupon-header">
                        <div class="coupon-title">ğŸ’° ä¸€æŠ˜åƒå¤–å–</div>
                        <div class="coupon-amount">æœ€é«˜90%</div>
                    </div>
                    <div class="coupon-desc">å¯ä¸å¤–å–èŠ‚çº¢åŒ…å åŠ ä½¿ç”¨</div>
                    <div class="coupon-footer">
                        <span class="tag stack">å¯å åŠ </span>
                        <div class="coupon-status">
                            <div class="status-dot"></div>
                            é™æ—¶
                        </div>
                    </div>
                </div>
                <div class="coupon-item" onclick="openMeituanGiftPack()">
                    <div class="coupon-header">
                        <div class="coupon-title">ğŸ 9.9è´­600å…ƒçº¢åŒ…</div>
                        <div class="coupon-amount">600å…ƒ</div>
                    </div>
                    <div class="coupon-desc">æ–°BUGå…¥å£ï¼Œé™æ—¶</div>
                    <div class="coupon-footer">
                        <span class="tag new">é™æ—¶</span>
                        <div class="coupon-status">
                            <div class="status-dot"></div>
                            æœ‰æ•ˆ
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- äº¬ä¸œå¤–å– - ä¿æŒç¬¬ä¸‰ä½ -->
        <div class="platform-section jd">
            <div class="platform-header">
                <div class="platform-info">
                    <div class="platform-icon">äº¬ä¸œ</div>
                    <div>
                        <div class="platform-title">äº¬ä¸œå¤–å–</div>
                        <div class="platform-subtitle">å“è´¨ä¿éšœ</div>
                    </div>
                </div>
                <div class="platform-badge">æ¨è</div>
            </div>
            <div class="coupon-grid">
                <div class="coupon-item" onclick="openJDGeneral()">
                    <div class="coupon-header">
                        <div class="coupon-title">ğŸ›ï¸ äº¬ä¸œå¤§åŒ…</div>
                    </div>
                    <div class="coupon-desc">å‘˜å·¥ä¸“ç”¨å¤§é¢åŒ…</div>
                    <div class="coupon-footer">
                        <span class="tag recommend">æ¨è</span>
                        <div class="coupon-status">
                            <div class="status-dot"></div>
                            å¯ç”¨
                        </div>
                    </div>
                </div>
                <div class="coupon-item" onclick="openJDTea()">
                    <div class="coupon-header">
                        <div class="coupon-title">ğŸ§‹ å¥¶èŒ¶å…¥å£</div>
                    </div>
                    <div class="coupon-desc">å¥¶èŒ¶ä¸“å±ä¼˜æƒ </div>
                    <div class="coupon-footer">
                        <span class="tag hot">çƒ­é—¨</span>
                        <div class="coupon-status">
                            <div class="status-dot"></div>
                            å¯ç”¨
                        </div>
                    </div>
                </div>
                <div class="coupon-item" onclick="openJDCoffee()">
                    <div class="coupon-header">
                        <div class="coupon-title">â˜• åº“è¿ªå’–å•¡</div>
                    </div>
                    <div class="coupon-desc">å’–å•¡å“ç‰Œä¼˜æƒ </div>
                    <div class="coupon-footer">
                        <span class="tag new">å“ç‰Œ</span>
                        <div class="coupon-status">
                            <div class="status-dot"></div>
                            å¯ç”¨
                        </div>
                    </div>
                </div>
                <div class="coupon-item" onclick="openJDNight()">
                    <div class="coupon-header">
                        <div class="coupon-title">ğŸŒ™ å®µå¤œå…¥å£</div>
                    </div>
                    <div class="coupon-desc">å°é¾™è™¾16.8å…ƒ</div>
                    <div class="coupon-footer">
                        <span class="tag stack">é™æ—¶</span>
                        <div class="coupon-status">
                            <div class="status-dot"></div>
                            å¯ç”¨
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- æ‚¬æµ®å¸®åŠ©æŒ‰é’® -->
    <div class="floating-help" onclick="showHelp()">
        <span>?</span>
    </div>
    
    <!-- æˆåŠŸæç¤º -->
    <div id="successToast" class="success-toast">
        æ“ä½œæˆåŠŸï¼æ­£åœ¨è·³è½¬...
    </div>
    
    <!-- å£ä»¤å¤åˆ¶å¼¹çª— -->
    <div id="couponModal" class="modal">
        <div class="modal-content">
            <div class="modal-title">ğŸ å£ä»¤å·²å¤åˆ¶æˆåŠŸ</div>
            <div class="coupon-code" id="couponCode">
                <div class="copy-success" style="display: none;">å·²å¤åˆ¶</div>
            </div>
            <div style="color: #666; margin-bottom: 20px;" id="couponHint">è¯·ç²˜è´´åˆ°ç›¸åº”Appä¸­ä½¿ç”¨</div>
            <button class="btn btn-secondary" onclick="closeCouponModal()">æˆ‘çŸ¥é“äº†</button>
            <button class="btn" onclick="openTargetApp()" id="openAppBtn">
                <span class="loading" id="appLoading" style="display: none;"></span>
                æ‰“å¼€åº”ç”¨
            </button>
        </div>
    </div>
    
    <!-- æ‰«ç å¼•å¯¼å¼¹çª— -->
    <div id="qrModal" class="modal">
        <div class="modal-content">
            <div class="modal-title">ğŸ“± å¾®ä¿¡æ‰«ç ä½¿ç”¨</div>
            <div class="qr-guide">
                <p style="margin-bottom: 16px;">è¯·é•¿æŒ‰ä¿å­˜/æˆªå›¾ä¸‹æ–¹äºŒç»´ç å›¾ç‰‡ï¼Œä½¿ç”¨å¾®ä¿¡æ‰«ç åŠŸèƒ½æ‰«æ</p>
                
                <!-- äºŒç»´ç å›¾ç‰‡æ˜¾ç¤ºåŒºåŸŸ -->
                <div style="text-align: center; margin: 20px 0; background: #f5f5f5; padding: 20px; border-radius: 12px;">
                    <img id="qrCodeImage" src="./1.jpg" alt="ä¸€æŠ˜åƒå¤–å–äºŒç»´ç " style="max-width: 200px; max-height: 200px; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.15);" onerror="this.style.display='none'; document.getElementById('qrPlaceholder').style.display='flex';">
                    <div id="qrPlaceholder" style="display: none; width: 200px; height: 200px; background: linear-gradient(135deg, #667eea, #764ba2); border-radius: 8px; margin: 0 auto; align-items: center; justify-content: center; color: white; font-size: 14px; text-align: center;">
                        è¯·å°†1.jpgäºŒç»´ç å›¾ç‰‡<br>æ”¾åœ¨åŒç›®å½•ä¸‹
                    </div>
                </div>
                
                <div class="guide-steps">
                    <div class="guide-step">
                        <div class="guide-step-icon">ğŸ“·</div>
                        <div class="guide-step-text">é•¿æŒ‰ä¿å­˜/æˆªå›¾</div>
                    </div>
                    <div class="guide-step">
                        <div class="guide-step-icon">ğŸ”</div>
                        <div class="guide-step-text">å¾®ä¿¡æ‰«ä¸€æ‰«</div>
                    </div>
                    <div class="guide-step">
                        <div class="guide-step-icon">ğŸ–¼ï¸</div>
                        <div class="guide-step-text">ä»ç›¸å†Œé€‰æ‹©</div>
                    </div>
                    <div class="guide-step">
                        <div class="guide-step-icon">âœ…</div>
                        <div class="guide-step-text">å®Œæˆé¢†å–</div>
                    </div>
                </div>
                
                <div style="background: #e3f2fd; padding: 12px; border-radius: 8px; margin-top: 16px; font-size: 13px; color: #1976d2;">
                    ğŸ’¡ æç¤ºï¼šå…ˆé¢†å–ä¸Šæ–¹å¤–å–èŠ‚çº¢åŒ…ï¼Œå†è·³è½¬å¾®ä¿¡æ‰“å¼€ç‚¹å‡»ã€é¢†å¤§é¢å·ã€‘å¯å åŠ ï¼Œè¿”ç°åˆ°æ‚¨ä¸‹å•è´¦å·ã€‚
                </div>
            </div>
            <button class="btn" onclick="closeQRModal()">æˆ‘çŸ¥é“äº†</button>
        </div>
    </div>
    
    <!-- å¸®åŠ©å¼¹çª— -->
    <div id="helpModal" class="modal">
        <div class="modal-content">
            <div class="modal-title">ğŸ’¡ ä½¿ç”¨å¸®åŠ©</div>
            <div style="text-align: left; line-height: 1.6; color: #666;">
                <p><strong>ğŸ“± å¦‚ä½•ä½¿ç”¨ï¼š</strong></p>
                <p>â€¢ ç‚¹å‡»ä¼˜æƒ åˆ¸å¡ç‰‡å³å¯é¢†å–</p>
                <p>â€¢ éƒ¨åˆ†ä¼˜æƒ åˆ¸å¯ä»¥å åŠ ä½¿ç”¨</p>
                <p>â€¢ å»ºè®®å…ˆé¢†å–å†ä¸‹å•</p>
                <br>
                <p><strong>âš ï¸ æ³¨æ„äº‹é¡¹ï¼š</strong></p>
                <p>â€¢ ä¼˜æƒ åˆ¸æœ‰ä½¿ç”¨æ—¶é™</p>
                <p>â€¢ éƒ¨åˆ†æ´»åŠ¨ä»…é™æ–°ç”¨æˆ·</p>
                <p>â€¢ å¾®ä¿¡ç¯å¢ƒä¸‹è¯·åœ¨æµè§ˆå™¨æ‰“å¼€</p>
                <p>â€¢ æ·˜å®å…¥å£å¿…é¡»ä½¿ç”¨é»˜è®¤æµè§ˆå™¨</p>
            </div>
            <button class="btn" onclick="closeHelpModal()">çŸ¥é“äº†</button>
        </div>
    </div>

    <!-- è·³è½¬å¤±è´¥è§£å†³æ–¹æ¡ˆå¼¹çª— -->
    <div id="failureModal" class="modal">
        <div class="modal-content">
            <div class="modal-title">ğŸš« è·³è½¬å¤±è´¥è§£å†³æ–¹æ¡ˆ</div>
            <div id="failureContent" style="text-align: left; line-height: 1.6; color: #666;">
                <!-- åŠ¨æ€å†…å®¹ -->
            </div>
            <div style="margin-top: 20px;">
                <button class="btn btn-secondary" onclick="closeFailureModal()">çŸ¥é“äº†</button>
                <button class="btn" id="retryBtn" onclick="retryLastAction()">é‡è¯•</button>
                <button class="btn" id="fallbackBtn" onclick="useFallbackMethod()" style="display: none;">å¤‡ç”¨æ–¹æ¡ˆ</button>
            </div>
        </div>
    </div>

    <!-- é¥¿äº†ä¹ˆ18.8æé™æš´æ¶¨æ‰«ç å¼¹çª— -->
    <div id="elemeExtremeModal" class="modal">
        <div class="modal-content">
            <div class="modal-title">ğŸ’¥ é¥¿äº†ä¹ˆ18.8æé™æš´æ¶¨</div>
            <div class="qr-guide">
                <p style="margin-bottom: 16px;">è¯·é•¿æŒ‰ä¿å­˜/æˆªå›¾ä¸‹æ–¹äºŒç»´ç å›¾ç‰‡ï¼Œä½¿ç”¨å¾®ä¿¡æ‰«ç åŠŸèƒ½æ‰«æ</p>
                
                <!-- äºŒç»´ç å›¾ç‰‡æ˜¾ç¤ºåŒºåŸŸ -->
                <div style="text-align: center; margin: 20px 0; background: #f5f5f5; padding: 20px; border-radius: 12px;">
                    <img id="elemeQrCodeImage" src="./2.jpg" alt="é¥¿äº†ä¹ˆ18.8æé™æš´æ¶¨äºŒç»´ç " style="max-width: 200px; max-height: 200px; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.15);" onerror="this.style.display='none'; document.getElementById('elemePlaceholder').style.display='flex';">
                    <div id="elemePlaceholder" style="display: none; width: 200px; height: 200px; background: linear-gradient(135deg, #ff6b6b, #ee5a52); border-radius: 8px; margin: 0 auto; align-items: center; justify-content: center; color: white; font-size: 14px; text-align: center;">
                        è¯·å°†2.jpgäºŒç»´ç å›¾ç‰‡<br>æ”¾åœ¨åŒç›®å½•ä¸‹
                    </div>
                </div>
                
                <div class="guide-steps">
                    <div class="guide-step">
                        <div class="guide-step-icon">ğŸ“·</div>
                        <div class="guide-step-text">é•¿æŒ‰ä¿å­˜/æˆªå›¾</div>
                    </div>
                    <div class="guide-step">
                        <div class="guide-step-icon">ğŸ”</div>
                        <div class="guide-step-text">å¾®ä¿¡æ‰«ä¸€æ‰«</div>
                    </div>
                    <div class="guide-step">
                        <div class="guide-step-icon">ğŸ–¼ï¸</div>
                        <div class="guide-step-text">ä»ç›¸å†Œé€‰æ‹©</div>
                    </div>
                    <div class="guide-step">
                        <div class="guide-step-icon">âœ…</div>
                        <div class="guide-step-text">å®Œæˆé¢†å–</div>
                    </div>
                </div>
                
                <div style="background: #ffebee; padding: 12px; border-radius: 8px; margin-top: 16px; font-size: 13px; color: #c62828;">
                    ğŸ”¥ é™æ—¶æ´»åŠ¨ï¼š18.8å…ƒæé™ä¼˜æƒ ï¼Œæ‰‹æ…¢æ— ï¼
                </div>
                
                <div style="background: #e3f2fd; padding: 12px; border-radius: 8px; margin-top: 8px; font-size: 13px; color: #1976d2;">
                    ğŸ’¡ æç¤ºï¼šé™æ—¶è†¨èƒ€18.8ï¼Œå¿…çˆ†18.8å…ƒ
                </div>
            </div>
            <button class="btn" onclick="document.getElementById('elemeExtremeModal').style.display='none'; document.querySelector('#elemeExtremeModal .modal-content').classList.remove('large-content');">æˆ‘çŸ¥é“äº†</button>
        </div>
    </div>

    <div id="manualModal" class="modal">
        <div class="modal-content">
            <div class="modal-title">ğŸ“‹ æ‰‹åŠ¨æ“ä½œæŒ‡å—</div>
            <div id="manualContent" style="text-align: left; line-height: 1.6; color: #666;">
                <!-- åŠ¨æ€å†…å®¹ -->
            </div>
            <div style="margin-top: 20px;">
                <button class="btn btn-secondary" onclick="closeManualModal()">æˆ‘çŸ¥é“äº†</button>
                <button class="btn" onclick="copyManualLink()">å¤åˆ¶é“¾æ¥</button>
            </div>
        </div>
    </div>

    <script>
        // é¡µé¢åŠ è½½å®Œæˆåçš„åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            animateStats();
            updateOnlineStatus();
            checkBrowserEnvironment();
            // ä¸è‡ªåŠ¨æ˜¾ç¤ºå…¬å‘Šï¼Œç­‰ç”¨æˆ·äº¤äº’åæ˜¾ç¤º
        });
        
        // æ‰“å¼€æœºç¥¨é…’åº—æ‰“è½¦ä¼˜æƒ é¡µé¢
        function openTravelPage() {
            showSuccessToast('æ­£åœ¨è·³è½¬åˆ°æœºç¥¨é…’åº—æ‰“è½¦ä¼˜æƒ é¡µé¢...');
            
            setTimeout(() => {
                // å°è¯•åœ¨æ–°æ ‡ç­¾é¡µæ‰“å¼€
                const newWindow = window.open('https://jp.nft3g.com', '_blank');
                
                // æ£€æµ‹æ˜¯å¦æˆåŠŸæ‰“å¼€æ–°çª—å£
                setTimeout(() => {
                    if (!newWindow || newWindow.closed || typeof newWindow.closed == 'undefined') {
                        // å¦‚æœå¼¹çª—è¢«é˜»æ­¢ï¼Œç›´æ¥è·³è½¬
                        window.location.href = 'https://jp.nft3g.com';
                    }
                }, 1000);
            }, 300);
        }
        
        // æ£€æŸ¥æµè§ˆå™¨ç¯å¢ƒ
        function checkBrowserEnvironment() {
            const isWeixin = /micromessenger/i.test(navigator.userAgent);
            const isStandaloneBrowser = window.navigator.standalone !== undefined || 
                                      /safari/i.test(navigator.userAgent) || 
                                      /chrome/i.test(navigator.userAgent);
            
            if (isWeixin || !isStandaloneBrowser) {
                document.getElementById('browserWarning').style.display = 'block';
            }
        }
        
        // å…³é—­å…¬å‘Šå¼¹çª—
        function closeAnnouncement() {
            const modal = document.getElementById('announcementModal');
            if (modal) {
                modal.style.opacity = '0';
                setTimeout(() => {
                    modal.style.display = 'none';
                }, 300);
            }
        }
        
        // ç»Ÿè®¡æ•°æ®åŠ¨ç”»
        function animateStats() {
            const counters = document.querySelectorAll('.stat-number');
            counters.forEach(counter => {
                const target = parseInt(counter.textContent);
                const duration = 2000;
                const increment = target / (duration / 16);
                let current = 0;
                
                const timer = setInterval(() => {
                    current += increment;
                    if (current >= target) {
                        current = target;
                        clearInterval(timer);
                    }
                    counter.textContent = Math.floor(current) + (counter.id === 'totalCoupons' ? '+' : counter.id === 'activeUsers' ? 'k+' : '+');
                }, 16);
            });
        }
        
        // æ›´æ–°åœ¨çº¿çŠ¶æ€
        function updateOnlineStatus() {
            const dots = document.querySelectorAll('.status-dot');
            dots.forEach(dot => {
                dot.style.background = navigator.onLine ? '#4caf50' : '#ff5722';
            });
        }
        
        // æ˜¾ç¤ºæˆåŠŸæç¤º
        function showSuccessToast(message) {
            const toast = document.getElementById('successToast');
            toast.textContent = message;
            toast.style.display = 'block';
            setTimeout(() => {
                toast.style.display = 'none';
            }, 3000);
        }
        
        // æ£€æµ‹æ˜¯å¦åœ¨å¾®ä¿¡ç¯å¢ƒ
        function isWeixinBrowser() {
            return /micromessenger/i.test(navigator.userAgent);
        }
        
        // å­˜å‚¨å½“å‰æ“ä½œä¿¡æ¯
        let currentAction = null;
        let fallbackLinks = {};
        let currentCouponType = 'taobao'; // é»˜è®¤æ·˜å®
        
        // æ£€æµ‹è·³è½¬æ˜¯å¦æˆåŠŸ
        function detectJumpFailure(timeout = 2000) {
            return new Promise((resolve) => {
                let resolved = false;
                const startTime = Date.now();
                
                // é¡µé¢å¤±ç„¦æ£€æµ‹ï¼ˆå¯èƒ½è·³è½¬æˆåŠŸï¼‰
                const onBlur = () => {
                    if (!resolved) {
                        resolved = true;
                        cleanup();
                        resolve(true);
                    }
                };
                
                // é¡µé¢é‡æ–°è·å¾—ç„¦ç‚¹ï¼ˆå¯èƒ½è·³è½¬å¤±è´¥ï¼‰
                const onFocus = () => {
                    setTimeout(() => {
                        if (!resolved && (Date.now() - startTime) > 1000) {
                            resolved = true;
                            cleanup();
                            resolve(false);
                        }
                    }, 300);
                };
                
                // é¡µé¢å¯è§æ€§å˜åŒ–
                const onVisibilityChange = () => {
                    if (document.hidden && !resolved) {
                        resolved = true;
                        cleanup();
                        resolve(true);
                    }
                };
                
                // è¶…æ—¶å¤„ç†
                const timeoutId = setTimeout(() => {
                    if (!resolved) {
                        resolved = true;
                        cleanup();
                        resolve(false); // è¶…æ—¶è®¤ä¸ºè·³è½¬å¤±è´¥
                    }
                }, timeout);
                
                const cleanup = () => {
                    clearTimeout(timeoutId);
                    window.removeEventListener('blur', onBlur);
                    window.removeEventListener('focus', onFocus);
                    document.removeEventListener('visibilitychange', onVisibilityChange);
                };
                
                // æ·»åŠ äº‹ä»¶ç›‘å¬
                window.addEventListener('blur', onBlur);
                window.addEventListener('focus', onFocus);
                document.addEventListener('visibilitychange', onVisibilityChange);
            });
        }
        
        // å¤åˆ¶åˆ°å‰ªè´´æ¿å¹¶æ˜¾ç¤ºæŒ‡å¼•
        function copyToClipboardWithGuide(couponText, platform = 'taobao') {
            console.log('æ­£åœ¨å¤åˆ¶å£ä»¤:', couponText); // è°ƒè¯•æ—¥å¿—
            
            // å…ˆå¤åˆ¶åˆ°å‰ªåˆ‡æ¿
            if (navigator.clipboard && navigator.clipboard.writeText) {
                navigator.clipboard.writeText(couponText).then(() => {
                    console.log('ä½¿ç”¨ç°ä»£APIå¤åˆ¶æˆåŠŸ');
                    showCopyGuideAndToast(platform, couponText);
                }).catch((error) => {
                    console.error('ç°ä»£APIå¤åˆ¶å¤±è´¥:', error);
                    // å¤åˆ¶å¤±è´¥ï¼Œä½¿ç”¨å¤‡ç”¨æ–¹æ³•
                    fallbackCopy(couponText);
                    showCopyGuideAndToast(platform, couponText);
                });
            } else {
                console.log('ä½¿ç”¨å¤‡ç”¨å¤åˆ¶æ–¹æ³•');
                // ä½¿ç”¨å¤‡ç”¨å¤åˆ¶æ–¹æ³•
                fallbackCopy(couponText);
                showCopyGuideAndToast(platform, couponText);
            }
        }
        
        // å¤‡ç”¨å¤åˆ¶æ–¹æ³•
        function fallbackCopy(text) {
            console.log('æ‰§è¡Œå¤‡ç”¨å¤åˆ¶ï¼Œå†…å®¹:', text);
            
            const textArea = document.createElement('textarea');
            textArea.value = text;
            textArea.style.position = 'fixed';
            textArea.style.left = '-9999px';
            textArea.style.top = '-9999px';
            textArea.style.opacity = '0';
            textArea.setAttribute('readonly', '');
            
            document.body.appendChild(textArea);
            
            // é€‰æ‹©æ–‡æœ¬
            textArea.focus();
            textArea.select();
            textArea.setSelectionRange(0, text.length);
            
            try {
                const success = document.execCommand('copy');
                console.log('execCommandå¤åˆ¶ç»“æœ:', success);
                if (!success) {
                    throw new Error('execCommandå¤åˆ¶å¤±è´¥');
                }
            } catch (err) {
                console.error('å¤‡ç”¨å¤åˆ¶å¤±è´¥:', err);
                // æœ€åå°è¯•æ‰‹åŠ¨é€‰æ‹©
                try {
                    textArea.select();
                    document.execCommand('copy');
                } catch (e) {
                    console.error('æ‰€æœ‰å¤åˆ¶æ–¹æ³•éƒ½å¤±è´¥äº†:', e);
                }
            }
            
            document.body.removeChild(textArea);
        }
        
        // æ˜¾ç¤ºå¤åˆ¶æŒ‡å¼•å’Œæç¤º
        function showCopyGuideAndToast(platform, couponText) {
            console.log('æ˜¾ç¤ºæŒ‡å¼•ï¼Œå£ä»¤å†…å®¹:', couponText);
            
            // å®‰å…¨å¤„ç†å£ä»¤æ–‡æœ¬ï¼Œé¿å…HTMLæ³¨å…¥å’ŒJavaScripté”™è¯¯
            const safeCouponText = couponText.replace(/'/g, '&#39;').replace(/"/g, '&quot;');
            const plainCouponText = couponText.replace(/'/g, "\\'").replace(/"/g, '\\"');
            
            // æ˜¾ç¤ºé¡µé¢å†…çš„æŒ‡å¼•
            const guide = document.getElementById('copyGuide');
            if (guide) {
                guide.innerHTML = `
                    ğŸ“‹ æ£€æµ‹åˆ°æ— æ³•è·³è½¬ï¼å£ä»¤å·²è‡ªåŠ¨å¤åˆ¶åˆ°å‰ªåˆ‡æ¿<br>
                    <strong>è¯·æŒ‰ä»¥ä¸‹æ­¥éª¤æ“ä½œï¼š</strong><br>
                    1ï¸âƒ£ æ‰‹åŠ¨æ‰“å¼€æ·˜å®App<br>
                    2ï¸âƒ£ åœ¨æœç´¢æ¡†ç²˜è´´å£ä»¤<br>
                    3ï¸âƒ£ ç‚¹å‡»æœç´¢å³å¯é¢†å–ä¼˜æƒ <br>
                    <div style="background: #f0f0f0; padding: 8px; border-radius: 6px; margin-top: 8px; font-family: monospace; font-size: 12px; word-break: break-all; user-select: all; cursor: pointer;" onclick="copyToClipboard('${plainCouponText}'); showSuccessToast('å£ä»¤å·²é‡æ–°å¤åˆ¶ï¼');" title="ç‚¹å‡»é‡æ–°å¤åˆ¶">
                        ${safeCouponText}
                    </div>
                `;
                guide.style.display = 'block';
                
                // æ»šåŠ¨åˆ°æŒ‡å¼•ä½ç½®
                guide.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }
            
            // æ˜¾ç¤ºæˆåŠŸæç¤º
            showSuccessToast('ğŸ‰ å£ä»¤å·²å¤åˆ¶ï¼è¯·æ‰“å¼€æ·˜å®Appç²˜è´´ä½¿ç”¨');
            
            // 3ç§’åæ˜¾ç¤ºè¯¦ç»†æŒ‡å¼•å¼¹çª—
            setTimeout(() => {
                showDetailedCopyGuide(platform, couponText);
            }, 2000);
        }
        
        // æ˜¾ç¤ºè¯¦ç»†çš„å¤åˆ¶æŒ‡å¼•å¼¹çª—
        function showDetailedCopyGuide(platform, couponText) {
            const modal = document.getElementById('couponModal');
            const title = modal.querySelector('.modal-title');
            const code = document.getElementById('couponCode');
            const hint = document.getElementById('couponHint');
            const btn = document.getElementById('openAppBtn');
            
            title.innerHTML = 'ğŸ“‹ è·³è½¬å¤±è´¥ - å£ä»¤å·²å¤åˆ¶';
            code.textContent = couponText;
            code.style.userSelect = 'all'; // å…è®¸ç”¨æˆ·é€‰æ‹©æ–‡æœ¬
            code.onclick = function() {
                copyToClipboard(couponText);
                showSuccessToast('å£ä»¤å·²é‡æ–°å¤åˆ¶ï¼');
            };
            
            hint.innerHTML = `
                <div style="text-align: left; line-height: 1.6;">
                    <strong>ğŸ“± æ‰‹åŠ¨æ“ä½œæ­¥éª¤ï¼š</strong><br>
                    1. æ‰“å¼€æ·˜å®App<br>
                    2. ç‚¹å‡»æœç´¢æ¡†<br>
                    3. é•¿æŒ‰ç²˜è´´ä¸Šæ–¹å£ä»¤<br>
                    4. ç‚¹å‡»æœç´¢é¢†å–ä¼˜æƒ <br><br>
                    <strong style="color: #ff6b6b;">ğŸ’¡ å£ä»¤å·²è‡ªåŠ¨å¤åˆ¶ï¼Œç›´æ¥ç²˜è´´å³å¯</strong><br>
                    <strong style="color: #666;">ç‚¹å‡»ä¸Šæ–¹å£ä»¤æ¡†å¯é‡æ–°å¤åˆ¶</strong>
                </div>
            `;
            btn.innerHTML = '<span class="loading" id="appLoading" style="display: none;"></span>æ‰“å¼€æ·˜å®App';
            
            modal.style.display = 'block';
        }
        
        // æ·˜å®é—ªè´­0.01å–å¥¶èŒ¶
        function openTaobaoEntry1() {
            currentAction = { platform: 'taobao', type: 'entry1' };
            currentCouponType = 'taobao';
            
            const couponCode = '98 HU7405   2:/â‚¤dJDY4XF5GXtåé¢†æœ€é«˜15å…ƒå¤§é¢çº¢åŒ…';
            const targetUrl = 'tbopen://m.taobao.com/tbopen/index.html?&action=ali.open.nav&module=h5&h5Url=https%3A%2F%2Fh5.ele.me%2Fminisite%2Fpages%2Findex-xsd%2Findex%3FisTab%3Dfalse%26disableNav%3DYES%26forceThemis%3Dtrue%26tfPos%3Dh5%26forbidRefineType%3DgoOut%26from%3Dminiapp.taobao%26channelInfo%3D%257B%2522subSubChannel%2522%253A%2522miniapp.taobao.et%2522%257D%26alsc_exsrc%3DES0006299852%26mdFrom%3D%26scene%3D0cb4d5747999412bb3be591eed7c76f7';
            
            console.log('æ·˜å®é—ªè´­å…¥å£1 - å£ä»¤:', couponCode);
            showSuccessToast('æ­£åœ¨å°è¯•è·³è½¬æ·˜å®é—ªè´­0.01å–å¥¶èŒ¶...');
            
            // éšè—ä¹‹å‰çš„å¤åˆ¶æŒ‡å¼•
            const guide = document.getElementById('copyGuide');
            if (guide) guide.style.display = 'none';
            
            // å°è¯•è·³è½¬
            attemptJumpToTaobao(targetUrl);
            
            // 3ç§’åç›´æ¥æ˜¾ç¤ºå£ä»¤å¼¹çª—
            setTimeout(() => {
                showCouponDialog('æ·˜å®é—ªè´­0.01å–å¥¶èŒ¶', couponCode);
            }, 3000);
        }
        
        // æ–°å®¢å…å•
        function openTaobaoEntry2() {
            currentAction = { platform: 'taobao', type: 'entry2' };
            currentCouponType = 'taobao';
            
            const couponCode = '57 HU7405   2:/OmOQ4XFUD8jâœ”å››é—ªè´­æ–°ç”¨æˆ·å¯é¢†é¦–å•å…å•ç¦åˆ©';
            const targetUrl = 'tbopen://m.taobao.com/tbopen/index.html?&action=ali.open.nav&module=h5&h5Url=https%3A%2F%2Fh5.ele.me%2Fminisite%2Fpages%2Findex-sgyx%2Findex%3Ffrom%3Dminiapp.taobao%26channelInfo%3D%257B%2522subSubChannel%2522%253A%2522miniapp.taobao.et%2522%257D%26alsc_exsrc%3DES0007076172%26disableNav%3DYES%26forbidRefineType%3DgoOut%26forceThemis%3Dtrue%26tfPos%3Dh5%26isTab%3Dfalse%26scene%3D0edcda3442b944219d4944f35cf78009';
            
            console.log('æ–°å®¢å…å•å…¥å£2 - å£ä»¤:', couponCode);
            showSuccessToast('æ­£åœ¨å°è¯•è·³è½¬æ–°å®¢å…å•...');
            
            const guide = document.getElementById('copyGuide');
            if (guide) guide.style.display = 'none';
            
            attemptJumpToTaobao(targetUrl);
            
            setTimeout(() => {
                showCouponDialog('æ–°å®¢å…å•', couponCode);
            }, 3000);
        }
        
        // æ·˜å®å åŠ çº¢åŒ…
        function openTaobaoEntry3() {
            currentAction = { platform: 'taobao', type: 'entry3' };
            currentCouponType = 'taobao';
            
            const couponCode = '47 HU7405   2:/M8Ky4XF74F5ä¸‰é—ªè´­æ–°ç”¨æˆ·å¯é¢†é¦–å•å…å•ç¦åˆ©';
            const targetUrl = 'tbopen://m.taobao.com/tbopen/index.html?&action=ali.open.nav&module=h5&h5Url=https%3A%2F%2Fm.duanqu.com%2F%3F_ariver_appid%3D8251537%26page%3Dplugin-private%253A%252F%252F2021003183669766%252Fpages%252Fwh-coupon-guide%252Findex%253Ffrom%253Dminiapp.taobao%2526channelInfo%253D%257B%2522subSubChannel%2522%253A%2522miniapp.taobao.et%2522%257D%2526alsc_exsrc%253DES0007485972%2526scene%253D587327319bf047f4a6cc7636d8a85d86';
            
            console.log('æ·˜å®å åŠ çº¢åŒ…å…¥å£3 - å£ä»¤:', couponCode);
            showSuccessToast('æ­£åœ¨å°è¯•è·³è½¬æ·˜å®å åŠ çº¢åŒ…...');
            
            const guide = document.getElementById('copyGuide');
            if (guide) guide.style.display = 'none';
            
            attemptJumpToTaobao(targetUrl);
            
            setTimeout(() => {
                showCouponDialog('æ·˜å®å åŠ çº¢åŒ…', couponCode);
            }, 3000);
        }
        
        // ç»Ÿä¸€çš„æ·˜å®è·³è½¬å°è¯•æ–¹æ³•
        function attemptJumpToTaobao(targetUrl) {
            console.log('å°è¯•è·³è½¬åˆ°:', targetUrl);
            
            // ä½¿ç”¨iframeæ–¹æ³•å°è¯•è·³è½¬
            const iframe = document.createElement('iframe');
            iframe.style.display = 'none';
            iframe.src = targetUrl;
            document.body.appendChild(iframe);
            
            // åŒæ—¶å°è¯•ç›´æ¥è·³è½¬
            setTimeout(() => {
                try {
                    window.location.href = targetUrl;
                } catch (e) {
                    console.log('ç›´æ¥è·³è½¬å¤±è´¥ï¼Œä½¿ç”¨iframeæ–¹æ³•');
                }
            }, 100);
            
            // 3ç§’åæ¸…ç†iframe
            setTimeout(() => {
                if (iframe && iframe.parentNode) {
                    iframe.parentNode.removeChild(iframe);
                }
            }, 3500);
        }
        
        // æ˜¾ç¤ºå£ä»¤å¯¹è¯æ¡†ï¼ˆç®€åŒ–ç‰ˆï¼‰
        function showCouponDialog(entryName, couponCode) {
            const modal = document.getElementById('couponModal');
            const title = modal.querySelector('.modal-title');
            const code = document.getElementById('couponCode');
            const hint = document.getElementById('couponHint');
            const openAppBtn = document.getElementById('openAppBtn');
            
            // æ¸…ç†ä¹‹å‰å¯èƒ½å­˜åœ¨çš„æŒ‰é’®åŒºåŸŸ
            const existingButtons = document.getElementById('jumpConfirmButtons');
            if (existingButtons) {
                existingButtons.remove();
            }
            
            title.innerHTML = `ğŸ“‹ ${entryName} - å£ä»¤å¤åˆ¶`;
            code.style.display = 'block';
            openAppBtn.style.display = 'inline-block';
            
            // å°è¯•è‡ªåŠ¨å¤åˆ¶å£ä»¤
            attemptCopyText(couponCode).then((success) => {
                code.textContent = couponCode;
                code.style.userSelect = 'all';
                code.style.backgroundColor = success ? '#e8f5e8' : '#fff3cd';
                code.style.borderColor = success ? '#28a745' : '#ffc107';
                code.style.cursor = 'pointer';
                code.onclick = function() { 
                    attemptCopyText(couponCode).then(result => {
                        showSuccessToast(result ? 'âœ… å£ä»¤å¤åˆ¶æˆåŠŸï¼' : 'âŒ å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨é€‰æ‹©å¤åˆ¶');
                    });
                };
                
                const statusText = success ? 
                    '<strong style="color: #28a745;">âœ… å£ä»¤å·²è‡ªåŠ¨å¤åˆ¶åˆ°å‰ªåˆ‡æ¿ï¼</strong>' :
                    '<strong style="color: #ff6b6b;">âš ï¸ è‡ªåŠ¨å¤åˆ¶å¤±è´¥ï¼Œè¯·ç‚¹å‡»ä¸Šæ–¹å£ä»¤æ¡†æ‰‹åŠ¨å¤åˆ¶</strong>';
                
                hint.innerHTML = `
                    <div style="text-align: center; line-height: 1.8; margin-bottom: 15px;">
                        ${statusText}
                    </div>
                    <div style="text-align: left; line-height: 1.6; background: #f8f9fa; padding: 15px; border-radius: 8px;">
                        <strong>ğŸ“± ä½¿ç”¨æ­¥éª¤ï¼š</strong><br>
                        1. ${success ? 'ç›´æ¥' : 'ç‚¹å‡»ä¸Šæ–¹å£ä»¤æ¡†å¤åˆ¶ï¼Œç„¶å'}æ‰“å¼€æ·˜å®App<br>
                        2. åœ¨æœç´¢æ¡†ä¸­ç²˜è´´å£ä»¤<br>
                        3. ç‚¹å‡»æœç´¢é¢†å–ä¼˜æƒ åˆ¸<br><br>
                        <div style="color: #666; font-size: 13px;">
                            ğŸ’¡ å¦‚æœè·³è½¬æˆåŠŸè¯·å¿½ç•¥æ­¤å¼¹çª—<br>
                            ğŸ’¡ ç‚¹å‡»ä¸Šæ–¹å£ä»¤æ¡†å¯é‡æ–°å¤åˆ¶
                        </div>
                    </div>
                `;
                
                openAppBtn.innerHTML = '<span class="loading" id="appLoading" style="display: none;"></span>æ‰“å¼€æ·˜å®App';
                
                // åŒæ—¶æ˜¾ç¤ºé¡µé¢å†…æŒ‡å¼•
                showSimplePageGuide(success, couponCode);
                
                // æ˜¾ç¤ºæç¤º
                const toastText = success ? 
                    'ğŸ‰ å£ä»¤å·²è‡ªåŠ¨å¤åˆ¶ï¼è¯·æ‰“å¼€æ·˜å®Appç²˜è´´ä½¿ç”¨' : 
                    'âš ï¸ è¯·æ‰‹åŠ¨å¤åˆ¶å£ä»¤ï¼ç‚¹å‡»ä¸Šæ–¹å£ä»¤æ¡†è¿›è¡Œå¤åˆ¶';
                showSuccessToast(toastText);
            });
            
            modal.style.display = 'block';
        }
        
        // ç®€åŒ–çš„æ–‡æœ¬å¤åˆ¶å‡½æ•°
        function attemptCopyText(text) {
            return new Promise((resolve) => {
                console.log('å¼€å§‹å¤åˆ¶æ–‡æœ¬:', text);
                
                // æ–¹æ³•1: ç°ä»£API
                if (navigator.clipboard && navigator.clipboard.writeText) {
                    navigator.clipboard.writeText(text).then(() => {
                        console.log('ç°ä»£APIå¤åˆ¶æˆåŠŸ');
                        resolve(true);
                    }).catch(() => {
                        console.log('ç°ä»£APIå¤±è´¥ï¼Œå°è¯•ä¼ ç»Ÿæ–¹æ³•');
                        resolve(tryLegacyCopy(text));
                    });
                } else {
                    console.log('ä¸æ”¯æŒç°ä»£APIï¼Œä½¿ç”¨ä¼ ç»Ÿæ–¹æ³•');
                    resolve(tryLegacyCopy(text));
                }
            });
        }
        
        // ä¼ ç»Ÿå¤åˆ¶æ–¹æ³•
        function tryLegacyCopy(text) {
            try {
                const textArea = document.createElement('textarea');
                textArea.value = text;
                textArea.style.position = 'fixed';
                textArea.style.top = '50%';
                textArea.style.left = '50%';
                textArea.style.transform = 'translate(-50%, -50%)';
                textArea.style.width = '300px';
                textArea.style.height = '100px';
                textArea.style.fontSize = '14px';
                textArea.style.border = '2px solid #007AFF';
                textArea.style.borderRadius = '8px';
                textArea.style.padding = '10px';
                textArea.style.zIndex = '10000';
                textArea.setAttribute('readonly', '');
                
                document.body.appendChild(textArea);
                textArea.focus();
                textArea.select();
                textArea.setSelectionRange(0, text.length);
                
                const success = document.execCommand('copy');
                console.log('ä¼ ç»Ÿæ–¹æ³•å¤åˆ¶ç»“æœ:', success);
                
                setTimeout(() => {
                    document.body.removeChild(textArea);
                }, 200);
                
                return success;
            } catch (err) {
                console.error('ä¼ ç»Ÿå¤åˆ¶æ–¹æ³•å¤±è´¥:', err);
                return false;
            }
        }
        
        // æ˜¾ç¤ºç®€åŒ–çš„é¡µé¢å†…æŒ‡å¼•
        function showSimplePageGuide(copySuccess, couponText) {
            const guide = document.getElementById('copyGuide');
            if (guide) {
                const safeCouponText = couponText.replace(/'/g, '&#39;').replace(/"/g, '&quot;');
                const plainCouponText = couponText.replace(/'/g, "\\'").replace(/"/g, '\\"');
                
                const statusText = copySuccess ? 
                    'âœ… å£ä»¤å·²è‡ªåŠ¨å¤åˆ¶åˆ°å‰ªåˆ‡æ¿ï¼' : 
                    'âŒ è‡ªåŠ¨å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶ä¸‹æ–¹å£ä»¤';
                
                guide.innerHTML = `
                    ğŸ“‹ ${statusText}<br>
                    <strong>è¯·æŒ‰ä»¥ä¸‹æ­¥éª¤æ“ä½œï¼š</strong><br>
                    1ï¸âƒ£ ${copySuccess ? 'ç›´æ¥' : 'å¤åˆ¶ä¸‹æ–¹å£ä»¤ï¼Œç„¶å'}æ‰“å¼€æ·˜å®App<br>
                    2ï¸âƒ£ åœ¨æœç´¢æ¡†ç²˜è´´å£ä»¤<br>
                    3ï¸âƒ£ ç‚¹å‡»æœç´¢å³å¯é¢†å–ä¼˜æƒ <br>
                    <div style="background: ${copySuccess ? '#e8f5e8' : '#fff3cd'}; padding: 12px; border-radius: 8px; margin-top: 10px; font-family: monospace; font-size: 13px; word-break: break-all; user-select: all; cursor: pointer; border: 2px solid ${copySuccess ? '#28a745' : '#ffc107'};" onclick="attemptCopyText('${plainCouponText}').then(r => showSuccessToast(r ? 'å£ä»¤å¤åˆ¶æˆåŠŸï¼' : 'å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨é€‰æ‹©'));" title="ç‚¹å‡»å¤åˆ¶å£ä»¤">
                        <div style="font-size: 11px; color: #666; margin-bottom: 5px;">ğŸ‘† ç‚¹å‡»ä¸‹æ–¹å£ä»¤å¤åˆ¶</div>
                        <strong>${safeCouponText}</strong>
                    </div>
                `;
                guide.style.display = 'block';
                guide.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }
        }
        
        // æ£€æµ‹æ˜¯å¦å¯ä»¥æ‰“å¼€åº”ç”¨
        function canOpenApp(scheme, timeout = 2500) {
            return new Promise((resolve) => {
                let resolved = false;
                const startTime = Date.now();
                
                // é¡µé¢å¤±ç„¦æ£€æµ‹ï¼ˆè¡¨ç¤ºå¯èƒ½è·³è½¬æˆåŠŸï¼‰
                const onBlur = () => {
                    if (!resolved) {
                        resolved = true;
                        cleanup();
                        resolve(true);
                    }
                };
                
                // é¡µé¢é‡æ–°è·å¾—ç„¦ç‚¹ï¼ˆå¯èƒ½è·³è½¬å¤±è´¥ï¼‰
                const onFocus = () => {
                    setTimeout(() => {
                        if (!resolved && (Date.now() - startTime) > 1000) {
                            resolved = true;
                            cleanup();
                            resolve(false);
                        }
                    }, 300);
                };
                
                // è¶…æ—¶å¤„ç†
                const timeoutId = setTimeout(() => {
                    if (!resolved) {
                        resolved = true;
                        cleanup();
                        resolve(false);
                    }
                }, timeout);
                
                const cleanup = () => {
                    clearTimeout(timeoutId);
                    window.removeEventListener('blur', onBlur);
                    window.removeEventListener('focus', onFocus);
                    if (iframe && iframe.parentNode) {
                        iframe.parentNode.removeChild(iframe);
                    }
                };
                
                // æ·»åŠ äº‹ä»¶ç›‘å¬
                window.addEventListener('blur', onBlur);
                window.addEventListener('focus', onFocus);
                
                // å°è¯•æ‰“å¼€åº”ç”¨
                const iframe = document.createElement('iframe');
                iframe.style.display = 'none';
                iframe.src = scheme;
                document.body.appendChild(iframe);
                
                // åŒæ—¶å°è¯•ç›´æ¥è·³è½¬ï¼ˆæŸäº›æµè§ˆå™¨æ›´æœ‰æ•ˆï¼‰
                try {
                    window.location.href = scheme;
                } catch (e) {
                    console.log('Direct navigation failed, using iframe method');
                }
            });
        }
        
        // é¥¿äº†ä¹ˆ18.8æé™æš´æ¶¨ - ä¿æŒä¸å˜
        function openElemeExtreme() {
            currentAction = { platform: 'eleme', type: 'extreme' };
            
            showSuccessToast('æ­£åœ¨æ‰“å¼€é¥¿äº†ä¹ˆ18.8æé™æš´æ¶¨...');
            
            setTimeout(() => {
                const elemeModal = document.getElementById('elemeExtremeModal');
                const elemeModalContent = elemeModal.querySelector('.modal-content');
                elemeModalContent.classList.add('large-content');
                elemeModal.style.display = 'block';
            }, 500);
        }
        
        // ç§‹å¤©ç¬¬ä¸€æ¯å¥¶èŒ¶
        function openMeituanAutumnTea() {
            currentAction = { platform: 'meituan', type: 'autumntea' };
            currentCouponType = 'meituan';
            fallbackLinks.meituan = 'https://5kma.cn/7EI28I';
            
            console.log('æ­£åœ¨æ‰“å¼€ç§‹å¤©ç¬¬ä¸€æ¯å¥¶èŒ¶å…¥å£...');
            showSuccessToast('æ­£åœ¨è·³è½¬åˆ°ç§‹å¤©ç¬¬ä¸€æ¯å¥¶èŒ¶ï¼ˆæ¯æ—¥é™è´­2ä»½ï¼‰...');
            
            // å¤šç§è·³è½¬æ–¹å¼ç¡®ä¿æˆåŠŸ
            setTimeout(() => {
                try {
                    // æ–¹æ³•1: æ–°çª—å£æ‰“å¼€
                    const newWindow = window.open('https://5kma.cn/7EI28I', '_blank');
                    console.log('å°è¯•æ–°çª—å£æ‰“å¼€:', newWindow);
                    
                    // æ–¹æ³•2: å¦‚æœæ–°çª—å£è¢«é˜»æ­¢ï¼Œç›´æ¥è·³è½¬
                    setTimeout(() => {
                        if (!newWindow || newWindow.closed || typeof newWindow.closed === 'undefined') {
                            console.log('æ–°çª—å£è¢«é˜»æ­¢ï¼Œå°è¯•ç›´æ¥è·³è½¬');
                            window.location.href = 'https://5kma.cn/7EI28I';
                        }
                    }, 800);
                    
                    // æ–¹æ³•3: æ£€æŸ¥è·³è½¬æ˜¯å¦æˆåŠŸ
                    setTimeout(() => {
                        if (!newWindow || newWindow.closed) {
                            console.log('è·³è½¬å¯èƒ½å¤±è´¥ï¼Œæ˜¾ç¤ºè§£å†³æ–¹æ¡ˆ');
                            showFailureSolution('meituan', 'autumntea');
                        }
                    }, 2000);
                    
                } catch (error) {
                    console.error('è·³è½¬è¿‡ç¨‹ä¸­å‡ºé”™:', error);
                    // å‡ºé”™æ—¶ç›´æ¥è·³è½¬
                    window.location.href = 'https://5kma.cn/7EI28I';
                }
            }, 300);
        }
        
        // ç¾å›¢å¤–å–èŠ‚ - ä¿æŒåŸæœ‰åŠŸèƒ½
        function openMeituanFestival() {
            currentAction = { platform: 'meituan', type: 'festival' };
            currentCouponType = 'meituan';
            fallbackLinks.meituan = 'http://dpurl.cn/9o4N4z1z';
            
            showSuccessToast('æ­£åœ¨è·³è½¬åˆ°ç¾å›¢å¤–å–èŠ‚...');
            
            if (isWeixinBrowser()) {
                setTimeout(() => {
                    const newWindow = window.open('http://dpurl.cn/9o4N4z1z', '_blank');
                    setTimeout(() => {
                        if (!newWindow || newWindow.closed) {
                            showFailureSolution('meituan', 'festival');
                        }
                    }, 1000);
                }, 500);
            } else {
                const deeplink = 'imeituan://www.meituan.com/takeout/browser?inner_url=https%3A%2F%2Fclick.meituan.com%2Ft%3Ft%3D1%26c%3D2%26p%3DFxiu1L9zHdcF&lch=cps:mtlm:10:b9831c934ad648519d5bf0be5e24eaad:3592876ff339ce3770d6:7:1696797023346810929';
                
                setTimeout(() => {
                    canOpenApp(deeplink).then(success => {
                        if (!success) {
                            const newWindow = window.open('http://dpurl.cn/9o4N4z1z', '_blank');
                            setTimeout(() => {
                                if (!newWindow || newWindow.closed) {
                                    showFailureSolution('meituan', 'festival');
                                }
                            }, 1000);
                        }
                    });
                }, 500);
            }
        }
        
        // ä¸€æŠ˜åƒå¤–å– - ä¿æŒåŸæœ‰åŠŸèƒ½
        function openMeituanDiscount() {
            currentAction = { platform: 'meituan', type: 'discount' };
            fallbackLinks.meituan = 'https://wxaurl.cn/kvDXEXXyCnq';
            
            showSuccessToast('æ­£åœ¨æ‰“å¼€ä¸€æŠ˜å¤–å–äºŒç»´ç ...');
            
            setTimeout(() => {
                const qrModal = document.getElementById('qrModal');
                const qrModalContent = qrModal.querySelector('.modal-content');
                qrModalContent.classList.add('large-content');
                qrModal.style.display = 'block';
            }, 500);
        }
        
        // 9.9è´­ä¹°600å…ƒçº¢åŒ… - ä¿æŒåŸæœ‰åŠŸèƒ½
        function openMeituanGiftPack() {
            currentAction = { platform: 'meituan', type: 'giftpack' };
            currentCouponType = 'meituan';
            
            const coupon = '1 %å¤åˆ¶ä¿¡æ¯#% æ‰“å¼€å›¢App http:/ğŸ’°eqMDQzOTk0NTUğŸ’°ä¸€èµ·é¢†';
            
            copyToClipboard(coupon).then(() => {
                document.getElementById('couponCode').textContent = coupon;
                document.getElementById('couponHint').textContent = 'è¯·ç²˜è´´åˆ°ç¾å›¢Appä¸­ä½¿ç”¨';
                document.getElementById('openAppBtn').innerHTML = '<span class="loading" id="appLoading" style="display: none;"></span>æ‰“å¼€ç¾å›¢';
                document.getElementById('couponModal').style.display = 'block';
                showSuccessToast('å£ä»¤å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼');
            }).catch(() => {
                document.getElementById('couponCode').textContent = coupon;
                document.getElementById('couponModal').style.display = 'block';
                showFailureSolution('meituan', 'giftpack');
            });
        }
        
        // äº¬ä¸œå¤–å–åŠŸèƒ½ä¿æŒä¸å˜
        function openJDGeneral() {
            currentAction = { platform: 'jingdong', type: 'general' };
            fallbackLinks.jingdong = 'https://kzurl11.cn/7Cdjjb';
            
            showSuccessToast('æ­£åœ¨è·³è½¬åˆ°äº¬ä¸œå¤–å–...');
            setTimeout(() => {
                const newWindow = window.open('https://kzurl11.cn/7Cdjjb', '_blank');
                setTimeout(() => {
                    if (!newWindow || newWindow.closed) {
                        showFailureSolution('jingdong', 'general');
                    }
                }, 1500);
            }, 500);
        }
        
        function openJDTea() {
            currentAction = { platform: 'jingdong', type: 'tea' };
            fallbackLinks.jingdong = 'https://kzurl17.cn/7CdBjq';
            
            showSuccessToast('æ­£åœ¨è·³è½¬åˆ°å¥¶èŒ¶ä¼˜æƒ ...');
            setTimeout(() => {
                const newWindow = window.open('https://kzurl17.cn/7CdBjq', '_blank');
                setTimeout(() => {
                    if (!newWindow || newWindow.closed) {
                        showFailureSolution('jingdong', 'tea');
                    }
                }, 1500);
            }, 500);
        }
        
        function openJDCoffee() {
            currentAction = { platform: 'jingdong', type: 'coffee' };
            fallbackLinks.jingdong = 'https://kzurl11.cn/7CdV97';
            
            showSuccessToast('æ­£åœ¨è·³è½¬åˆ°åº“è¿ªå’–å•¡...');
            setTimeout(() => {
                const newWindow = window.open('https://kzurl11.cn/7CdV97', '_blank');
                setTimeout(() => {
                    if (!newWindow || newWindow.closed) {
                        showFailureSolution('jingdong', 'coffee');
                    }
                }, 1500);
            }, 500);
        }
        
        function openJDNight() {
            currentAction = { platform: 'jingdong', type: 'night' };
            fallbackLinks.jingdong = 'https://kzurl07.cn/7CdVFi';
            
            showSuccessToast('æ­£åœ¨è·³è½¬åˆ°å®µå¤œä¼˜æƒ ...');
            setTimeout(() => {
                const newWindow = window.open('https://kzurl07.cn/7CdVFi', '_blank');
                setTimeout(() => {
                    if (!newWindow || newWindow.closed) {
                        showFailureSolution('jingdong', 'night');
                    }
                }, 1500);
            }, 500);
        }
        
        // å¤åˆ¶åˆ°å‰ªè´´æ¿
        function copyToClipboard(text) {
            console.log('copyToClipboardè¢«è°ƒç”¨ï¼Œå†…å®¹:', text);
            
            if (!text || text.trim() === '') {
                console.error('å¤åˆ¶å†…å®¹ä¸ºç©º');
                showSuccessToast('âŒ å¤åˆ¶å¤±è´¥ï¼šå†…å®¹ä¸ºç©º');
                return Promise.reject('å†…å®¹ä¸ºç©º');
            }
            
            if (navigator.clipboard && navigator.clipboard.writeText) {
                return navigator.clipboard.writeText(text).then(() => {
                    console.log('ç°ä»£APIå¤åˆ¶æˆåŠŸ:', text);
                    showCopySuccess();
                }).catch((error) => {
                    console.error('ç°ä»£APIå¤åˆ¶å¤±è´¥:', error);
                    // ä½¿ç”¨å¤‡ç”¨æ–¹æ³•
                    return fallbackCopySimple(text);
                });
            } else {
                console.log('ä¸æ”¯æŒç°ä»£APIï¼Œä½¿ç”¨å¤‡ç”¨æ–¹æ³•');
                return fallbackCopySimple(text);
            }
        }
        
        // ç®€å•çš„å¤‡ç”¨å¤åˆ¶æ–¹æ³•
        function fallbackCopySimple(text) {
            console.log('fallbackCopySimpleè¢«è°ƒç”¨ï¼Œå†…å®¹:', text);
            
            const textArea = document.createElement('textarea');
            textArea.value = text;
            textArea.style.position = 'fixed';
            textArea.style.left = '-9999px';
            textArea.style.top = '-9999px';
            textArea.style.opacity = '0';
            textArea.setAttribute('readonly', '');
            
            document.body.appendChild(textArea);
            
            try {
                textArea.focus();
                textArea.select();
                textArea.setSelectionRange(0, text.length);
                
                const success = document.execCommand('copy');
                console.log('execCommandç»“æœ:', success);
                
                if (success) {
                    showCopySuccess();
                    return Promise.resolve();
                } else {
                    throw new Error('execCommandè¿”å›false');
                }
            } catch (err) {
                console.error('å¤‡ç”¨å¤åˆ¶å¤±è´¥:', err);
                showSuccessToast('âŒ å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶');
                return Promise.reject(err);
            } finally {
                document.body.removeChild(textArea);
            }
        }
        
        // æ˜¾ç¤ºå¤åˆ¶æˆåŠŸæç¤º
        function showCopySuccess() {
            const indicator = document.querySelector('.copy-success');
            if (indicator) {
                indicator.style.display = 'block';
                setTimeout(() => {
                    indicator.style.display = 'none';
                }, 2000);
            }
        }
        
        // æ˜¾ç¤ºè·³è½¬å¤±è´¥è§£å†³æ–¹æ¡ˆ
        function showFailureSolution(platform, actionType) {
            const modal = document.getElementById('failureModal');
            const content = document.getElementById('failureContent');
            const retryBtn = document.getElementById('retryBtn');
            const fallbackBtn = document.getElementById('fallbackBtn');
            
            let solutionHtml = '';
            
            switch (platform) {
                case 'meituan':
                    solutionHtml = `
                        <p><strong>ğŸ”§ ç¾å›¢å¤–å–è·³è½¬å¤±è´¥è§£å†³æ–¹æ¡ˆï¼š</strong></p>
                        <p>1. <strong>æ£€æŸ¥ç¾å›¢App</strong>ï¼šç¡®ä¿å·²å®‰è£…æœ€æ–°ç‰ˆç¾å›¢App</p>
                        <p>2. <strong>æ‰‹åŠ¨æ‰“å¼€</strong>ï¼šæ‰“å¼€ç¾å›¢App â†’ å¤–å– â†’ æœç´¢"ä¼˜æƒ åˆ¸"</p>
                        <p>3. <strong>æµè§ˆå™¨è®¿é—®</strong>ï¼šä½¿ç”¨å¤‡ç”¨ç½‘é¡µç‰ˆé“¾æ¥</p>
                        <p>4. <strong>å¾®ä¿¡ç”¨æˆ·</strong>ï¼šç‚¹å‡»å³ä¸Šè§’"..."é€‰æ‹©æµè§ˆå™¨æ‰“å¼€</p>
                        <br>
                        <p><strong>ğŸ’¡ æ¨èè§£å†³æ–¹æ³•ï¼š</strong></p>
                        <p>ç‚¹å‡»ä¸‹æ–¹"å¤‡ç”¨æ–¹æ¡ˆ"ä½¿ç”¨ç½‘é¡µç‰ˆé“¾æ¥</p>
                    `;
                    fallbackBtn.style.display = 'inline-block';
                    break;
                    
                case 'jingdong':
                    solutionHtml = `
                        <p><strong>ğŸ”§ äº¬ä¸œå¤–å–è·³è½¬å¤±è´¥è§£å†³æ–¹æ¡ˆï¼š</strong></p>
                        <p>1. <strong>æ£€æŸ¥äº¬ä¸œApp</strong>ï¼šç¡®ä¿å·²å®‰è£…äº¬ä¸œApp</p>
                        <p>2. <strong>ç›´æ¥è®¿é—®</strong>ï¼šåœ¨æµè§ˆå™¨ä¸­æ‰“å¼€å¤‡ç”¨é“¾æ¥</p>
                        <p>3. <strong>æ‰‹åŠ¨æ“ä½œ</strong>ï¼šæ‰“å¼€äº¬ä¸œApp â†’ æœç´¢"å¤–å–ä¼˜æƒ "</p>
                        <p>4. <strong>ç½‘ç»œæ£€æŸ¥</strong>ï¼šç¡®ä¿ç½‘ç»œè¿æ¥æ­£å¸¸</p>
                        <br>
                        <p><strong>ğŸ’¡ æ¨èè§£å†³æ–¹æ³•ï¼š</strong></p>
                        <p>äº¬ä¸œå¤–å–é“¾æ¥é€šå¸¸æ¯”è¾ƒç¨³å®šï¼Œç‚¹å‡»é‡è¯•å³å¯</p>
                    `;
                    fallbackBtn.style.display = 'none';
                    break;
                    
                case 'taobao':
                    solutionHtml = `
                        <p><strong>ğŸ”§ æ·˜å®å¤–å–è·³è½¬å¤±è´¥è§£å†³æ–¹æ¡ˆï¼š</strong></p>
                        <p>1. <strong>ä½¿ç”¨é»˜è®¤æµè§ˆå™¨</strong>ï¼šSafari/Chromeç­‰æµè§ˆå™¨æ‰“å¼€</p>
                        <p>2. <strong>é€€å‡ºå¾®ä¿¡</strong>ï¼šå¦‚åœ¨å¾®ä¿¡ä¸­ï¼Œè¯·é€‰æ‹©æµè§ˆå™¨æ‰“å¼€</p>
                        <p>3. <strong>æ£€æŸ¥æ·˜å®App</strong>ï¼šç¡®ä¿å·²å®‰è£…æ·˜å®App</p>
                        <p>4. <strong>å£ä»¤å·²å¤åˆ¶</strong>ï¼šè¯·æ‰‹åŠ¨æ‰“å¼€æ·˜å®Appç²˜è´´ä½¿ç”¨</p>
                        <br>
                        <p><strong>âš ï¸ ç‰¹åˆ«æé†’ï¼š</strong></p>
                        <p>æ·˜å®å…¥å£å¿…é¡»åœ¨é»˜è®¤æµè§ˆå™¨ä¸­ä½¿ç”¨ï¼Œå£ä»¤å·²è‡ªåŠ¨å¤åˆ¶</p>
                    `;
                    fallbackBtn.style.display = 'none';
                    break;
            }
            
            content.innerHTML = solutionHtml;
            modal.style.display = 'block';
        }
        
        function showHelp() {
            document.getElementById('helpModal').style.display = 'block';
        }
        
        // å…³é—­å¼¹çª—
        function closeCouponModal() {
            document.getElementById('couponModal').style.display = 'none';
        }
        
        function closeQRModal() {
            const qrModal = document.getElementById('qrModal');
            const qrModalContent = qrModal.querySelector('.modal-content');
            qrModalContent.classList.remove('large-content');
            qrModal.style.display = 'none';
        }
        
        function closeHelpModal() {
            document.getElementById('helpModal').style.display = 'none';
        }
        
        function closeFailureModal() {
            document.getElementById('failureModal').style.display = 'none';
        }
        
        function closeManualModal() {
            document.getElementById('manualModal').style.display = 'none';
        }
        
        // é‡è¯•ä¸Šæ¬¡æ“ä½œ
        function retryLastAction() {
            closeFailureModal();
            if (!currentAction) return;
            
            const { platform, type } = currentAction;
            
            if (platform === 'taobao') {
                switch (type) {
                    case 'entry1':
                        openTaobaoEntry1();
                        break;
                    case 'entry2':
                        openTaobaoEntry2();
                        break;
                    case 'entry3':
                        openTaobaoEntry3();
                        break;
                }
            } else if (platform === 'meituan') {
                switch (type) {
                    case 'festival':
                        openMeituanFestival();
                        break;
                    case 'autumntea':
                        openMeituanAutumnTea();
                        break;
                    case 'discount':
                        openMeituanDiscount();
                        break;
                    case 'giftpack':
                        openMeituanGiftPack();
                        break;
                }
            } else if (platform === 'jingdong') {
                switch (type) {
                    case 'general':
                        openJDGeneral();
                        break;
                    case 'tea':
                        openJDTea();
                        break;
                    case 'coffee':
                        openJDCoffee();
                        break;
                    case 'night':
                        openJDNight();
                        break;
                }
            }
        }
        
        // ä½¿ç”¨å¤‡ç”¨æ–¹æ¡ˆ
        function useFallbackMethod() {
            closeFailureModal();
            if (!currentAction) return;
            
            const platform = currentAction.platform;
            const fallbackUrl = fallbackLinks[platform];
            
            if (fallbackUrl) {
                showSuccessToast('æ­£åœ¨ä½¿ç”¨å¤‡ç”¨æ–¹æ¡ˆè·³è½¬...');
                setTimeout(() => {
                    const newWindow = window.open(fallbackUrl, '_blank');
                    if (!newWindow || newWindow.closed) {
                        setTimeout(() => {
                            showManualGuide(platform, currentAction.type);
                        }, 1000);
                    }
                }, 500);
            } else {
                showManualGuide(platform, currentAction.type);
            }
        }
        
        // æ˜¾ç¤ºæ‰‹åŠ¨æ“ä½œæŒ‡å—
        function showManualGuide(platform, actionType) {
            const modal = document.getElementById('manualModal');
            const content = document.getElementById('manualContent');
            
            let guideHtml = '';
            
            switch (platform) {
                case 'meituan':
                    guideHtml = `
                        <p><strong>ğŸ“± ç¾å›¢å¤–å–æ‰‹åŠ¨æ“ä½œæ­¥éª¤ï¼š</strong></p>
                        <ol style="padding-left: 20px;">
                            <li>æ‰“å¼€ç¾å›¢App</li>
                            <li>ç‚¹å‡»é¦–é¡µ"å¤–å–"å…¥å£</li>
                            <li>åœ¨æœç´¢æ¡†è¾“å…¥"çº¢åŒ…"æˆ–"ä¼˜æƒ åˆ¸"</li>
                            <li>æŸ¥æ‰¾å¤–å–èŠ‚æ´»åŠ¨å…¥å£</li>
                            <li>é¢†å–ç›¸åº”ä¼˜æƒ åˆ¸</li>
                        </ol>
                        <br>
                        <p><strong>ğŸ”— å¤‡ç”¨ç½‘é¡µé“¾æ¥ï¼š</strong></p>
                        <p style="background: #f0f0f0; padding: 10px; border-radius: 5px; font-family: monospace; font-size: 12px; word-break: break-all;">
                            ${fallbackLinks.meituan || 'http://dpurl.cn/9o4N4z1z'}
                        </p>
                        <p><strong>ğŸ‚ å¥¶èŒ¶ä¸“ç”¨é“¾æ¥ï¼š</strong></p>
                        <p style="background: #f0f0f0; padding: 10px; border-radius: 5px; font-family: monospace; font-size: 12px; word-break: break-all;">
                            https://5kma.cn/7EI28I (æ¯æ—¥é™è´­2ä»½)
                        </p>
                    `;
                    break;
                    
                case 'taobao':
                    guideHtml = `
                        <p><strong>ğŸ“± æ·˜å®å¤–å–æ‰‹åŠ¨æ“ä½œæ­¥éª¤ï¼š</strong></p>
                        <ol style="padding-left: 20px;">
                            <li>ç¡®ä¿åœ¨é»˜è®¤æµè§ˆå™¨ä¸­æ‰“å¼€ï¼ˆé‡è¦ï¼ï¼‰</li>
                            <li>æ‰“å¼€æ·˜å®App</li>
                            <li>åœ¨æœç´¢æ¡†ç²˜è´´å·²å¤åˆ¶çš„å£ä»¤</li>
                            <li>æŒ‰æç¤ºå®Œæˆä¼˜æƒ åˆ¸é¢†å–</li>
                            <li>äº«å—è¶…å€¼ä¼˜æƒ </li>
                        </ol>
                        <br>
                        <p><strong>ğŸ’¡ æ¸©é¦¨æç¤ºï¼š</strong></p>
                        <p style="background: #e3f2fd; padding: 10px; border-radius: 5px; font-size: 12px; color: #1565c0;">
                            å£ä»¤å·²è‡ªåŠ¨å¤åˆ¶åˆ°å‰ªåˆ‡æ¿ï¼Œç›´æ¥åœ¨æ·˜å®ä¸­ç²˜è´´å³å¯ä½¿ç”¨
                        </p>
                    `;
                    break;
            }
            
            content.innerHTML = guideHtml;
            modal.style.display = 'block';
        }
        
        // å¤åˆ¶æ‰‹åŠ¨é“¾æ¥
        function copyManualLink() {
            if (!currentAction) return;
            
            const platform = currentAction.platform;
            const linkToCopy = fallbackLinks[platform];
            
            if (linkToCopy) {
                copyToClipboard(linkToCopy).then(() => {
                    showSuccessToast('é“¾æ¥å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼');
                    closeManualModal();
                }).catch(() => {
                    alert('å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶é“¾æ¥');
                });
            }
        }
        
        // æ‰“å¼€ç›®æ ‡App
        function openTargetApp() {
            const loading = document.getElementById('appLoading');
            if (loading) loading.style.display = 'inline-block';
            
            setTimeout(() => {
                if (loading) loading.style.display = 'none';
                
                if (currentCouponType === 'meituan') {
                    // å°è¯•å¤šç§æ–¹å¼æ‰“å¼€ç¾å›¢
                    const meituanSchemes = [
                        'imeituan://www.meituan.com',
                        'meituan://',
                        'com.sankuai.meituan://'
                    ];
                    
                    meituanSchemes.forEach((scheme, index) => {
                        setTimeout(() => {
                            try {
                                window.location.href = scheme;
                            } catch (e) {
                                console.log(`ç¾å›¢è·³è½¬æ–¹æ¡ˆ${index + 1}å¤±è´¥`);
                            }
                        }, index * 200);
                    });
                    
                } else if (currentCouponType === 'taobao') {
                    // å°è¯•å¤šç§æ–¹å¼æ‰“å¼€æ·˜å®
                    const taobaoSchemes = [
                        'taobao://',
                        'tbopen://m.taobao.com',
                        'com.taobao.taobao://'
                    ];
                    
                    taobaoSchemes.forEach((scheme, index) => {
                        setTimeout(() => {
                            try {
                                window.location.href = scheme;
                            } catch (e) {
                                console.log(`æ·˜å®è·³è½¬æ–¹æ¡ˆ${index + 1}å¤±è´¥`);
                            }
                        }, index * 200);
                    });
                }
                
                // 3ç§’åå…³é—­å¼¹çª—
                setTimeout(() => {
                    closeCouponModal();
                }, 3000);
                
            }, 1000);
        }
        
        // ç‚¹å‡»å¼¹çª—å¤–éƒ¨å…³é—­
        window.onclick = function(event) {
            const modals = ['couponModal', 'qrModal', 'helpModal', 'failureModal', 'manualModal', 'elemeExtremeModal'];
            modals.forEach(modalId => {
                const modal = document.getElementById(modalId);
                if (event.target === modal) {
                    if (modalId === 'qrModal' || modalId === 'elemeExtremeModal') {
                        const modalContent = modal.querySelector('.modal-content');
                        modalContent.classList.remove('large-content');
                    }
                    modal.style.display = 'none';
                }
            });
        }
        
        // ç›‘å¬ç½‘ç»œçŠ¶æ€å˜åŒ–
        window.addEventListener('online', updateOnlineStatus);
        window.addEventListener('offline', updateOnlineStatus);
        
        // é¡µé¢å¯è§æ€§å˜åŒ–æ—¶æ›´æ–°çŠ¶æ€
        document.addEventListener('visibilitychange', function() {
            if (!document.hidden) {
                updateOnlineStatus();
            }
        });
    </script>
</body>
</html>